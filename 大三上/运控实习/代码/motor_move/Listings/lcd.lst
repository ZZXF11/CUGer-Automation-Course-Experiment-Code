C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN .\Objects\lcd.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE lcd.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\motor_move) DEBUG OBJECTEXTEND 
                    -PRINT(.\Listings\lcd.lst) TABS(2) OBJECT(.\Objects\lcd.obj)

line level    source

   1          #include <lcd.h>
   2          #include <init.h>
   3          
   4          unsigned char Column;
   5          unsigned char Page_ ;  // 页地址寄存器 D1,DO:页地址
   6          unsigned char Code_ ;  // 字符代码寄存器
   7          
   8          unsigned char Command; // 指令寄存器
   9          unsigned char LCDData; // 数据寄存器
  10          
  11          xdata unsigned char CWADD1 _at_ 0x1cff;   // 写指令代码地址(E1)     *****地址译码接CS3*****
  12          xdata unsigned char DWADD1 _at_ 0x1eff;   // 写显示数据地址(E1)
  13          xdata unsigned char CRADD1 _at_ 0x1dff;   // 读状态字地址(E1)
  14          xdata unsigned char DRADD1 _at_ 0x1fff;   // 读显示数据地址(E1)
  15          
  16          xdata unsigned char CWADD2 _at_ 0x3cff;   // 写指令代码地址(E2)
  17          xdata unsigned char DWADD2 _at_ 0x3eff;   // 写显示数进地址(E2)
  18          xdata unsigned char CRADD2 _at_ 0x3dff;   // 读状态字地址(E2)
  19          xdata unsigned char DRADD2 _at_ 0x3fff;   // 读显示数据地址(E2)
  20          
  21          // 1.写指令代码子程序(E1)
  22          void WriteCommandE1()
  23          {
  24   1        while(CRADD1 & 0x80);
  25   1        CWADD1 = Command;
  26   1      }
  27          
  28          // 2.写显示数据子程序(E1)
  29          void WriteDataE1()
  30          {
  31   1        while(CRADD1 & 0x80);
  32   1        DWADD1 = LCDData;
  33   1      }
  34          
  35          // 3.读显示数据子程序(E1)
  36          void ReadDataE1()
  37          {
  38   1        while(CRADD1 & 0x80);
  39   1        LCDData = DRADD1;
  40   1      }
  41          
  42          // 4.写指令代码子程序(E2)
  43          void WriteCommandE2()
  44          {
  45   1        while(CRADD2 & 0x80);
  46   1        CWADD2 = Command;
  47   1      }
  48          
  49          // 5.写显示数据子程序(E2)
  50          void WriteDataE2()
  51          {
  52   1        while(CRADD2 & 0x80);
  53   1        DWADD2 = LCDData;
  54   1      }
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 2   

  55          
  56          // 6.读显示数据子程序(E2)
  57          void ReadDataE2()
  58          {
  59   1        while(CRADD2 & 0x80);
  60   1        LCDData = DRADD2;
  61   1      }
  62          //数字&标点符号字模库    8x16 点阵
  63          code unsigned char DIGTAB[][16]={
  64          /*--  文字:  0  --*/
  65          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
  66          0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,
  67          
  68          /*--  文字:  1  --*/
  69          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
  70          0x00,0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,
  71          
  72          /*--  文字:  2  --*/
  73          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
  74          0x00,0x70,0x08,0x08,0x08,0x08,0xF0,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,
  75          
  76          /*--  文字:  3  --*/
  77          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
  78          0x00,0x30,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x18,0x20,0x21,0x21,0x22,0x1C,0x00,
  79          
  80          /*--  文字:  4  --*/
  81          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
  82          0x00,0x00,0x80,0x40,0x30,0xF8,0x00,0x00,0x00,0x06,0x05,0x24,0x24,0x3F,0x24,0x24,
  83          
  84          /*--  文字:  5  --*/
  85          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
  86          0x00,0xF8,0x88,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x20,0x20,0x20,0x11,0x0E,0x00,
  87          
  88          /*--  文字:  6  --*/
  89          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
  90          0x00,0xE0,0x10,0x88,0x88,0x90,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x20,0x1F,0x00,
  91          
  92          /*--  文字:  7  --*/
  93          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
  94          0x00,0x18,0x08,0x08,0x88,0x68,0x18,0x00,0x00,0x00,0x00,0x3E,0x01,0x00,0x00,0x00,
  95          
  96          /*--  文字:  8  --*/
  97          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
  98          0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00,
  99          
 100          /*--  文字:  9  --*/
 101          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
 102          0x00,0xF0,0x08,0x08,0x08,0x10,0xE0,0x00,0x00,0x01,0x12,0x22,0x22,0x11,0x0F,0x00,
 103          
 104          /*--  文字:  A  --*/
 105          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
 106          0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20,
 107          
 108          /*--  文字:  B  --*/
 109          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
 110          0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00,
 111          
 112          /*--  文字:  C  --*/
 113          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
 114          0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00,
 115          
 116          /*--  文字:  D  --*/
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 3   

 117          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
 118          0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00,
 119          
 120          /*--  文字:  E  --*/
 121          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
 122          0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00,
 123          
 124          /*--  文字:  F  --*/
 125          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
 126          0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00,
 127          
 128          /*--  文字:  S  --*/
 129          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
 130          0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00,
 131          
 132          /*--  文字:  X  --18*/
 133          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
 134          0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20,
 135          
 136          /*--  文字:  Y  --19*/
 137          /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
 138          0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,
 139           };
 140          
 141          
 142          // 中文字模库   16x16点阵
 143          code unsigned char CCTAB[][32] ={
 144          /*--  文字:  牛  --*/
 145          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 146          0x00,0x40,0x20,0x1E,0x10,0x10,0x10,0xFF,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x00,
 147          0x02,0x02,0x02,0x02,0x02,0x02,0x02,0xFF,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x00,
 148          
 149          /*--  文字:  马  --*/
 150          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 151          0x00,0x02,0x02,0xF2,0x82,0x82,0x82,0x82,0x82,0x82,0xFE,0x80,0x80,0x80,0x00,0x00,
 152          0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x48,0x80,0x40,0x3F,0x00,0x00,
 153          
 154          /*--  文字:  小  --*/
 155          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 156          0x00,0x00,0x00,0xE0,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x20,0x40,0x80,0x00,0x00,
 157          0x08,0x04,0x03,0x00,0x00,0x40,0x80,0x7F,0x00,0x00,0x00,0x00,0x00,0x01,0x0E,0x00,
 158          
 159          /*--  文字:  分  --*/
 160          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 161          0x80,0x40,0x20,0x90,0x88,0x86,0x80,0x80,0x80,0x83,0x8C,0x10,0x20,0x40,0x80,0x00,
 162          0x00,0x80,0x40,0x20,0x18,0x07,0x00,0x40,0x80,0x40,0x3F,0x00,0x00,0x00,0x00,0x00,
 163          
 164          /*--  文字:  队  --*/
 165          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 166          0x00,0xFE,0x02,0x22,0xDA,0x06,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
 167          0x00,0xFF,0x08,0x10,0x88,0x47,0x20,0x18,0x07,0x00,0x07,0x18,0x20,0x40,0x80,0x00,
 168          
 169          /*--  文字:  选  --*/
 170          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 171          0x40,0x40,0x42,0xCC,0x00,0x50,0x4E,0xC8,0x48,0x7F,0xC8,0x48,0x48,0x40,0x00,0x00,
 172          0x00,0x40,0x20,0x1F,0x20,0x50,0x4C,0x43,0x40,0x40,0x4F,0x50,0x50,0x5C,0x40,0x00,
 173          
 174          /*--  文字:  择  --*/
 175          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 176          0x10,0x10,0xFF,0x10,0x00,0x82,0x86,0x4A,0x52,0xA2,0x52,0x4A,0x86,0x80,0x80,0x00,
 177          0x42,0x82,0x7F,0x01,0x00,0x10,0x12,0x12,0x12,0xFF,0x12,0x12,0x12,0x10,0x00,0x00,
 178          
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 4   

 179          /*--  文字:  项  --*/
 180          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 181          0x08,0x08,0x08,0xF8,0x08,0x08,0x00,0xF2,0x12,0x1A,0xD6,0x12,0x12,0xF2,0x02,0x00,
 182          0x10,0x30,0x10,0x0F,0x08,0x08,0x80,0x4F,0x20,0x18,0x07,0x10,0x20,0x4F,0x80,0x00,
 183          
 184          /*--  文字:  目  --*/
 185          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 186          0x00,0x00,0xFE,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0xFE,0x00,0x00,0x00,
 187          0x00,0x00,0xFF,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0xFF,0x00,0x00,0x00,
 188          
 189          /*--  文字:  ：  --*/
 190          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 191          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 192          0x00,0x00,0x36,0x36,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 193          
 194          /*--  文字:  手  --*/
 195          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 196          0x00,0x00,0x24,0x24,0x24,0x24,0x24,0xFC,0x22,0x22,0x22,0x23,0x22,0x00,0x00,0x00,
 197          0x02,0x02,0x02,0x02,0x02,0x42,0x82,0x7F,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x00,
 198          
 199          /*--  文字:  动  --*/
 200          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 201          0x40,0x44,0xC4,0x44,0x44,0x44,0x40,0x10,0x10,0xFF,0x10,0x10,0x10,0xF0,0x00,0x00,
 202          0x10,0x3C,0x13,0x10,0x14,0xB8,0x40,0x30,0x0E,0x01,0x40,0x80,0x40,0x3F,0x00,0x00,
 203          
 204          /*--  文字:  控  --*/
 205          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 206          0x10,0x10,0x10,0xFF,0x90,0x20,0x98,0x48,0x28,0x09,0x0E,0x28,0x48,0xA8,0x18,0x00,
 207          0x02,0x42,0x81,0x7F,0x00,0x40,0x40,0x42,0x42,0x42,0x7E,0x42,0x42,0x42,0x40,0x00,
 208          
 209          /*--  文字:  制  --*/
 210          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 211          0x40,0x50,0x4E,0x48,0x48,0xFF,0x48,0x48,0x48,0x40,0xF8,0x00,0x00,0xFF,0x00,0x00,
 212          0x00,0x00,0x3E,0x02,0x02,0xFF,0x12,0x22,0x1E,0x00,0x0F,0x40,0x80,0x7F,0x00,0x00,
 213          
 214          /*--  文字:  模  --*/
 215          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 216          0x10,0x10,0xD0,0xFF,0x90,0x14,0xE4,0xAF,0xA4,0xA4,0xA4,0xAF,0xE4,0x04,0x00,0x00,
 217          0x04,0x03,0x00,0xFF,0x00,0x89,0x4B,0x2A,0x1A,0x0E,0x1A,0x2A,0x4B,0x88,0x80,0x00,
 218          
 219          /*--  文字:  式  --*/
 220          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 221          0x10,0x10,0x90,0x90,0x90,0x90,0x90,0x10,0x10,0xFF,0x10,0x10,0x11,0x16,0x10,0x00,
 222          0x00,0x20,0x60,0x20,0x3F,0x10,0x10,0x10,0x00,0x03,0x0C,0x10,0x20,0x40,0xF8,0x00,
 223          
 224          /*--  文字:  退  --*/
 225          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 226          0x40,0x40,0x42,0xCC,0x00,0x00,0xFF,0x49,0x49,0xC9,0x49,0x49,0x7F,0x80,0x00,0x00,
 227          0x00,0x40,0x20,0x1F,0x20,0x40,0x5F,0x48,0x44,0x40,0x41,0x42,0x45,0x58,0x40,0x00,
 228          
 229          /*--  文字:  出  --*/
 230          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 231          0x00,0x00,0x7C,0x40,0x40,0x40,0x40,0xFF,0x40,0x40,0x40,0x40,0xFC,0x00,0x00,0x00,
 232          0x00,0x7C,0x40,0x40,0x40,0x40,0x40,0x7F,0x40,0x40,0x40,0x40,0x40,0xFC,0x00,0x00,
 233          
 234          /*--  文字:  直  --*/
 235          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 236          0x00,0x04,0x04,0xF4,0x94,0x94,0x94,0x9F,0x94,0x94,0x94,0xF4,0x04,0x04,0x00,0x00,
 237          0x40,0x40,0x40,0x7F,0x4A,0x4A,0x4A,0x4A,0x4A,0x4A,0x4A,0x7F,0x40,0x40,0x40,0x00,
 238          
 239          /*--  文字:  线  --*/
 240          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 5   

 241          0x20,0x30,0xAC,0x63,0x20,0x18,0x80,0x90,0x90,0xFF,0x90,0x49,0x4A,0x48,0x40,0x00,
 242          0x22,0x67,0x22,0x12,0x12,0x12,0x40,0x40,0x20,0x13,0x0C,0x14,0x22,0x41,0xF8,0x00,
 243          
 244          /*--  文字:  模  --*/
 245          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 246          0x10,0x10,0xD0,0xFF,0x90,0x14,0xE4,0xAF,0xA4,0xA4,0xA4,0xAF,0xE4,0x04,0x00,0x00,
 247          0x04,0x03,0x00,0xFF,0x00,0x89,0x4B,0x2A,0x1A,0x0E,0x1A,0x2A,0x4B,0x88,0x80,0x00,
 248          
 249          /*--  文字:  式  --*/
 250          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 251          0x10,0x10,0x90,0x90,0x90,0x90,0x90,0x10,0x10,0xFF,0x10,0x10,0x11,0x16,0x10,0x00,
 252          0x00,0x20,0x60,0x20,0x3F,0x10,0x10,0x10,0x00,0x03,0x0C,0x10,0x20,0x40,0xF8,0x00,
 253          
 254          /*--  文字:  圆  --*/
 255          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 256          0x00,0xFE,0x02,0x82,0xBA,0xAA,0xAA,0xAA,0xAA,0xAA,0xBA,0x82,0x02,0xFE,0x00,0x00,
 257          0x00,0xFF,0x40,0x4F,0x60,0x50,0x48,0x46,0x48,0x50,0x60,0x4F,0x40,0xFF,0x00,0x00,
 258          
 259          /*--  文字:  弧  --*/
 260          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 261          0x02,0xE2,0x22,0x22,0x3E,0x00,0xFC,0x04,0xFC,0x04,0x02,0xFE,0x03,0x02,0x00,0x00,
 262          0x00,0x43,0x82,0x42,0xBE,0x60,0x1F,0x00,0x7F,0x28,0x10,0x61,0x0E,0x30,0x40,0x00,
 263          
 264          /*--  文字:  模  --*/
 265          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 266          0x10,0x10,0xD0,0xFF,0x90,0x14,0xE4,0xAF,0xA4,0xA4,0xA4,0xAF,0xE4,0x04,0x00,0x00,
 267          0x04,0x03,0x00,0xFF,0x00,0x89,0x4B,0x2A,0x1A,0x0E,0x1A,0x2A,0x4B,0x88,0x80,0x00,
 268          
 269          /*--  文字:  式  --*/
 270          /*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
 271          0x10,0x10,0x90,0x90,0x90,0x90,0x90,0x10,0x10,0xFF,0x10,0x10,0x11,0x16,0x10,0x00,
 272          0x00,0x20,0x60,0x20,0x3F,0x10,0x10,0x10,0x00,0x03,0x0C,0x10,0x20,0x40,0xF8,0x00,
 273           };
 274          
 275          void Init()  // ******初始化程序******
 276          {
 277   1        Command = 0xe2;      
 278   1        WriteCommandE1();
 279   1        WriteCommandE2();
 280   1      
 281   1        Command = 0xa4;
 282   1        WriteCommandE1();
 283   1        WriteCommandE2();
 284   1      
 285   1        Command = 0xa9;
 286   1        WriteCommandE1();
 287   1        WriteCommandE2();
 288   1      
 289   1        Command = 0xa0;
 290   1        WriteCommandE1();
 291   1        WriteCommandE2();
 292   1      
 293   1        Command = 0xc0;
 294   1        WriteCommandE1();
 295   1        WriteCommandE2();
 296   1      
 297   1        Command = 0xaf;
 298   1        WriteCommandE1();
 299   1        WriteCommandE2();
 300   1      }
 301          
 302          
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 6   

 303          void Clear()  // *********清屏*********
 304          {
 305   1        unsigned char i,j;
 306   1      
 307   1        i = 0;
 308   1        do {
 309   2      
 310   2          Command = (i + 0xb8); // 页地址设置
 311   2          WriteCommandE1();
 312   2          WriteCommandE2();
 313   2      
 314   2          Command = 0x00;      // 列地址设置为"0"
 315   2          WriteCommandE1();
 316   2          WriteCommandE2();
 317   2      
 318   2          j = 0x50;            // 一页清 80个字节
 319   2          do {
 320   3            LCDData = 0x00;    // 显示数据为"0"
 321   3            WriteDataE1();
 322   3            WriteDataE2();
 323   3          }while(--j !=0);     // 页内字节清零循环
 324   2      
 325   2        }while(++i !=4);       // 页地址暂存器加一
 326   1                               // 显示区清零循环
 327   1      }
 328          
 329          
 330          
 331          
 332          // *******中文显示子程序*******
 333          void WriteCHN16x16()       //*********调用一次显示一个字*****
 334          {
 335   1        unsigned char i,j,k;
 336   1      
 337   1        i = 0;
 338   1        j = 0;
 339   1        while(j<2) {
 340   2          Command = ((Page_ + j) & 0x03) | 0xb8;   // 设置页地址
 341   2          WriteCommandE1();
 342   2          WriteCommandE2();
 343   2          k = Column;                   // 列地址值
 344   2          while(k < Column + 16){
 345   3            if (k < PD1) {              // 为左半屏显示区域(E1)
 346   4              Command = k;
 347   4              WriteCommandE1();         // 设置列地址值
 348   4              LCDData = CCTAB[Code_][i]; // 取汉字字模数据
 349   4              WriteDataE1();            // 写字模数据
 350   4            } else{                     // 为右半屏显示区域(E2)
 351   4              Command = k-PD1;
 352   4              WriteCommandE2();         // 设置列地址值
 353   4              LCDData = CCTAB[Code_][i]; // 取汉字字模数据
 354   4              WriteDataE2();            // 写字模数据
 355   4            };
 356   3      
 357   3            i++;
 358   3            if( ++k >= PD1 * 2) break;  // 列地址是否超出显示范围
 359   3          } ;
 360   2          j++;
 361   2        };
 362   1      }
 363          
 364          // *******标点符号显示子程序*******
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 7   

 365          void WriteNUM8x16()       //*********调用一次显示一个字*****
 366          {
 367   1        unsigned char i,j,k;
 368   1        i = 0;
 369   1        j = 0;
 370   1        while(j<2) { //***********page的数量，16行对应2个page*********
 371   2          Command = ((Page_ + j) & 0x03) | 0xb8;   // 设置页地址
 372   2          WriteCommandE1();
 373   2          WriteCommandE2();
 374   2          k = Column;                   // 列地址值
 375   2          while(k < Column + 8){        //*******取模8x16，列变成8了*******
 376   3            if (k < PD1) {              // 为左半屏显示区域(E1)
 377   4              Command = k;
 378   4              WriteCommandE1();         // 设置列地址值
 379   4              LCDData = DIGTAB[Code_][i]; // 取数字字模数据
 380   4              WriteDataE1();            // 写字模数据
 381   4            } else{                     // 为右半屏显示区域(E2)
 382   4              Command = k-PD1;
 383   4              WriteCommandE2();         // 设置列地址值
 384   4              LCDData = DIGTAB[Code_][i]; // 取数字字模数据
 385   4              WriteDataE2();            // 写字模数据
 386   4            };
 387   3            i++;
 388   3            if( ++k >= PD1 * 2) break;  // 列地址是否超出显示范围
 389   3          } ;
 390   2          j++;
 391   2        };
 392   1      }
 393          
 394          
 395          
 396          
 397          //项目名显示函数
 398          void ShowXiangmu()
 399          {
 400   1        unsigned int A=0x03;
 401   1        Init();        //初始化  
 402   1        Clear();       //清屏
 403   1      
 404   1      //****************************项目：车辆状况    监控系统************************************
 405   1      //-------------------------上排-----------------------------------
 406   1        Page_ = 0x02; //（上排 ）    
 407   1        Column = 0x00;//列位置
 408   1        Code_ = 0x00;
 409   1        WriteCHN16x16();   //“牛 ”
 410   1      
 411   1        Page_ = 0x02; 
 412   1        Column = 0x10;
 413   1        Code_ = 0x01;
 414   1        WriteCHN16x16();   //“马 ”
 415   1      
 416   1        Page_ = 0x02;    
 417   1        Column = 0x20;
 418   1        Code_ = 0x02;
 419   1        WriteCHN16x16();   //“小”
 420   1      
 421   1        Page_ = 0x02;    
 422   1        Column = 0x30;
 423   1        Code_ = 0x03;
 424   1        WriteCHN16x16();   //“分 ”
 425   1      
 426   1        Page_ = 0x02;     
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 8   

 427   1        Column = 0x40;
 428   1        Code_ = 0x04;
 429   1        WriteCHN16x16();   //“队 ”
 430   1      
 431   1      }
 432          
 433          //作者显示函数
 434          void Show_select()
 435          {
 436   1        Init();        //初始化  
 437   1        Clear();       //清屏
 438   1         //****************************选择项目************************************
 439   1      //------------------------------------上排--------------------------------------------------  
 440   1        Page_ = 0x02; //（上排 ）    
 441   1        Column = 0x00;//列位置
 442   1        Code_ = 0x05;
 443   1        WriteCHN16x16();   //“选 ”
 444   1      
 445   1        Page_ = 0x02; 
 446   1        Column = 0x10;
 447   1        Code_ = 0x06;
 448   1        WriteCHN16x16();   //“择 ”
 449   1      
 450   1        Page_ = 0x02;    
 451   1        Column = 0x20;
 452   1        Code_ = 0x07;
 453   1        WriteCHN16x16();   //“项”
 454   1      
 455   1        Page_ = 0x02;    
 456   1        Column = 0x30;
 457   1        Code_ = 0x08;
 458   1        WriteCHN16x16();   //“目 ”
 459   1      
 460   1        Page_ = 0x02;     
 461   1        Column = 0x40;
 462   1        Code_ = 0x09;
 463   1        WriteCHN16x16();   //“： ”
 464   1      
 465   1      
 466   1      //----------------------------------------------------------------------------
 467   1        Page_ = 0x00; //（下排 ）    
 468   1        Column = 0x00;
 469   1        Code_ = 0x10;
 470   1        WriteNUM8x16();   //“s ”
 471   1      
 472   1         Page_ = 0x00;  
 473   1        Column = 0x08;
 474   1        Code_ = 0x02;
 475   1        WriteNUM8x16();   //“2”
 476   1      
 477   1        Page_ = 0x04;     
 478   1        Column = 0x20;
 479   1        Code_ = 0x10;
 480   1        WriteNUM8x16();   //“s ”
 481   1      
 482   1        Page_ = 0x04;     
 483   1        Column = 0x28;
 484   1        Code_ = 0x06;
 485   1        WriteNUM8x16();   //“6 ”
 486   1        
 487   1        Page_ = 0x04;     
 488   1        Column = 0x40;
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 9   

 489   1        Code_ = 0x10;
 490   1        WriteNUM8x16();   //“s ”
 491   1        
 492   1        Page_ = 0x04;     
 493   1        Column = 0x48;
 494   1        Code_ = 0x01;
 495   1        WriteNUM8x16();   //“1 ”
 496   1        
 497   1        Page_ = 0x04;     
 498   1        Column = 0x50;
 499   1        Code_ = 0x00;
 500   1        WriteNUM8x16();   //“0”
 501   1        
 502   1        Page_ = 0x04;     
 503   1        Column = 0x60;
 504   1        Code_ = 0x10;
 505   1        WriteNUM8x16();   //“s”
 506   1        
 507   1        Page_ = 0x04;     
 508   1        Column = 0x68;
 509   1        Code_ = 0x01;
 510   1        WriteNUM8x16();   //“1”
 511   1        
 512   1        Page_ = 0x04;     
 513   1        Column = 0x70;
 514   1        Code_ = 0x04;
 515   1        WriteNUM8x16();   //“4”
 516   1        
 517   1      }
 518          
 519          //显示手动控制
 520          void Show_head()
 521          {
 522   1        Init();        //初始化  
 523   1        Clear();       //清屏
 524   1         //****************************选择项目************************************
 525   1      //------------------------------------上排--------------------------------------------------  
 526   1        Page_ = 0x02; //（上排 ）    
 527   1        Column = 0x00;//列位置
 528   1        Code_ = 0x0a;
 529   1        WriteCHN16x16();   
 530   1        
 531   1        Page_ = 0x02; //（上排 ）    
 532   1        Column = 0x10;//列位置
 533   1        Code_ = 0x0b;
 534   1        WriteCHN16x16();   
 535   1        
 536   1        Page_ = 0x02; //（上排 ）    
 537   1        Column = 0x20;//列位置
 538   1        Code_ = 0x0c;
 539   1        WriteCHN16x16();   
 540   1        
 541   1        Page_ = 0x02; //（上排 ）    
 542   1        Column = 0x30;//列位置
 543   1        Code_ = 0x0d;
 544   1        WriteCHN16x16();   
 545   1        
 546   1        Page_ = 0x02; //（上排 ）    
 547   1        Column = 0x40;//列位置
 548   1        Code_ = 0x0e;
 549   1        WriteCHN16x16();  
 550   1        
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 10  

 551   1        Page_ = 0x02; //（上排 ）    
 552   1        Column = 0x50;//列位置
 553   1        Code_ = 0x0f;
 554   1        WriteCHN16x16();  
 555   1        
 556   1        Page_ = 0x04;     
 557   1        Column = 0x10;
 558   1        Code_ = 0x10;
 559   1        WriteNUM8x16();   //“s”
 560   1        
 561   1        Page_ = 0x04;     
 562   1        Column = 0x18;
 563   1        Code_ = 0x05;
 564   1        WriteNUM8x16();   //“5”
 565   1        
 566   1        Page_ = 0x04; //（上排 ）    
 567   1        Column = 0x28;//列位置
 568   1        Code_ = 0x10;
 569   1        WriteCHN16x16();
 570   1      
 571   1        Page_ = 0x04; //（上排 ）    
 572   1        Column = 0x38;//列位置
 573   1        Code_ = 0x11;
 574   1        WriteCHN16x16();  
 575   1      }
 576          
 577          //显示直线模式
 578          void Show_str()
 579          {
 580   1        Init();        //初始化  
 581   1        Clear();       //清屏
 582   1         //****************************选择项目************************************
 583   1      //------------------------------------上排--------------------------------------------------  
 584   1        Page_ = 0x02; //（上排 ）    
 585   1        Column = 0x00;//列位置
 586   1        Code_ = 0x12;
 587   1        WriteCHN16x16();   
 588   1        
 589   1        Page_ = 0x02; //（上排 ）    
 590   1        Column = 0x10;//列位置
 591   1        Code_ = 0x13;
 592   1        WriteCHN16x16();   
 593   1        
 594   1        Page_ = 0x02; //（上排 ）    
 595   1        Column = 0x20;//列位置
 596   1        Code_ = 0x14;
 597   1        WriteCHN16x16();   
 598   1        
 599   1        Page_ = 0x02; //（上排 ）    
 600   1        Column = 0x30;//列位置
 601   1        Code_ = 0x15;
 602   1        WriteCHN16x16();     
 603   1        
 604   1        Page_ = 0x04;     
 605   1        Column = 0x00;
 606   1        Code_ = 0x11;
 607   1        WriteNUM8x16();   //“X”
 608   1        
 609   1        Page_ = 0x04;     
 610   1        Column = 0x08;
 611   1        Code_ = 0x09;
 612   1        WriteCHN16x16();   //“:”
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 11  

 613   1        
 614   1        Page_ = 0x04;     
 615   1        Column = 0x18;
 616   1        Code_ = 0x00;
 617   1        WriteNUM8x16();   //“0”
 618   1        
 619   1        Page_ = 0x04;     
 620   1        Column = 0x20;
 621   1        Code_ = 0x00;
 622   1        WriteNUM8x16();   //“0”
 623   1        
 624   1        Page_ = 0x04;     
 625   1        Column = 0x28;
 626   1        Code_ = 0x00;
 627   1        WriteNUM8x16();   //“0”
 628   1        
 629   1      //  Page_ = 0x04; //（上排 ）    
 630   1      //  Column = 0x28;//列位置
 631   1      //  Code_ = 0x10;
 632   1      //  WriteCHN16x16();
 633   1      
 634   1      //  Page_ = 0x04; //（上排 ）    
 635   1      //  Column = 0x38;//列位置
 636   1      //  Code_ = 0x11;
 637   1      //  WriteCHN16x16();  
 638   1      }
 639          
 640          //显示圆模式
 641          void Show_yh()
 642          {
 643   1        Init();        //初始化  
 644   1        Clear();       //清屏
 645   1         //****************************选择项目************************************
 646   1      //------------------------------------上排--------------------------------------------------  
 647   1        Page_ = 0x02; //（上排 ）    
 648   1        Column = 0x00;//列位置
 649   1        Code_ = 0x16;
 650   1        WriteCHN16x16();   
 651   1        
 652   1        Page_ = 0x02; //（上排 ）    
 653   1        Column = 0x10;//列位置
 654   1        Code_ = 0x17;
 655   1        WriteCHN16x16();   
 656   1        
 657   1        Page_ = 0x02; //（上排 ）    
 658   1        Column = 0x20;//列位置
 659   1        Code_ = 0x18;
 660   1        WriteCHN16x16();   
 661   1        
 662   1        Page_ = 0x02; //（上排 ）    
 663   1        Column = 0x30;//列位置
 664   1        Code_ = 0x19;
 665   1        WriteCHN16x16();     
 666   1        
 667   1        Page_ = 0x04;     
 668   1        Column = 0x10;
 669   1        Code_ = 0x10;
 670   1        WriteNUM8x16();   //“s”
 671   1        
 672   1        Page_ = 0x04;     
 673   1        Column = 0x18;
 674   1        Code_ = 0x05;
C51 COMPILER V9.57.0.0   LCD                                                               12/12/2021 17:30:28 PAGE 12  

 675   1        WriteNUM8x16();   //“5”
 676   1        
 677   1        Page_ = 0x04; // 
 678   1        Column = 0x28;//列位置
 679   1        Code_ = 0x10;
 680   1        WriteCHN16x16();
 681   1      
 682   1        Page_ = 0x04; //  
 683   1        Column = 0x38;//列位置
 684   1        Code_ = 0x11;
 685   1        WriteCHN16x16();  
 686   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    965    ----
   CONSTANT SIZE    =   1136    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
